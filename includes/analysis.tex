\section{Experiments}

    Here we present two particular sets of problems generated by \fuzzer{}: Eager-Hard and Lazy-Hard. These two problem sets were unique in their ability to elicit poor performance in one solver, but not another. Full details of test scripts, configurations, and problems that were used in the experiment can be found in the Appendix.

    \textbf{TODO:}

    \begin{enumerate}
        \item supply machine environment description
        \item supply install scripts that produce trace builds
        \item supply test scripts that invoke the solvers and produce traces
    \end{enumerate}

\section{Results}

    \subsection{Performance on Lazy-Hard}

        On this problem set \cvc{} did poorly, but \us{} did well. The graphs in figure X show the performance results for both solvers.

        \cvc{} showed the following behaviour in its log file:

        \begin{enumerate}
            \item Loads all facts
            \item Flattens concats
            \item Computes equivalence classes
            \item Discovers conflict early
                {\scriptsize\begin{verbatim}
CONFLICT: Eq engine conflict : (and (= "woof" (str.++ "woof" lsym_5 lsym_5 lsym_5 lsym_5
lsym_5 lsym_5 lsym_5 lsym_5 lsym_5 lsym_5 lsym_5 lsym_5 lsym_5 lsym_5 lsym_5)) (= "" lsym_5)
(= "" var3) (= "" var5) (= "" var7) (= "" var9) (= "" var11) (= "" var13) (= "" var15)
(= "" var17) (= "" var19) (= "" var21) (= "" var23) (= "" var25) (= "" var27) (= "" var29)
(= "" var30) (= (str.++ "woof" var3 var5 var7 var9 var11 var13 var15 var17 var19 var21
var23 var25 var27 var29 var30) (str.++ "meow" var43 var45 var47 var49 var51 var53 var55
var57 var59 var61 var63 var65 var67 var69 var70)) (= "" var43) (= "" var45) (= "" var47)
(= "" var49) (= "" var51) (= "" var53) (= "" var55) (= "" var57) (= "" var59) (= "" var61)
(= "" var63) (= "" var65) (= "" var67) (= "" var69) (= "" var70) (= "meow" (str.++ "meow"
lsym_5 lsym_5 lsym_5 lsym_5 lsym_5 lsym_5 lsym_5 lsym_5 lsym_5 lsym_5 lsym_5 lsym_5 lsym_5
lsym_5 lsym_5)))
                \end{verbatim}}
            \item Gets caught doing some sort of check
            \item Infers inequality
        \end{enumerate}

        \us{} showed the following behaviour in its log file:

        \begin{enumerate}
            \item loads all facts
            \item immediately spots inconsistency:
                {\scriptsize\begin{verbatim}
-------- [str] new_eq_check ../src/smt/theory_str.cpp:1864 ---------
checking whether (str.++ "woof" var2) and (str.++ "meow" var42) can be equal
------------------------------------------------
-------- [str] new_eq_check ../src/smt/theory_str.cpp:1867 ---------
inconsistency detected: (str.++ "woof" var2) cannot be equal to (str.++ "meow" var42)
------------------------------------------------
-------- [str] assert_axiom ../src/smt/theory_str.cpp:179 ---------
asserting (not (= (str.++ "woof" var2) (str.++ "meow" var42)))
------------------------------------------------
                \end{verbatim}}
        \end{enumerate}

        \textbf{TODO:}

        \begin{enumerate}
            \item \us{} cactus plot
            \item \cvc{} cactus plot
            \item comparison plot
        \end{enumerate}

    \subsection{Eager-Hard}

        On this problem set \cvc{} did well, but \us{} did poorly. The graphs in figure X show the performance results for both solvers.

        \cvc{} showed the following behaviour in its log file:

        \begin{enumerate}
            \item Loads all facts
            \item Flattens concats
            \item Computes equivalence classes
            \item Finds solution
        \end{enumerate}

        \us{} showed the following behaviour in its log file:

        \begin{enumerate}
            \item Loads all facts
            \item Tries assigning solution by "dragging" it across the variables
            \item Creates a ton of equivalence classes
            \item Gets caught comparing equivalence classes
            \item Finds solution
        \end{enumerate}

        \textbf{TODO:}

        \begin{enumerate}
            \item \us{} cactus plot
            \item \cvc{} cactus plot
            \item comparison plot
        \end{enumerate}

    \subsection{Concats-Extracts}

        No data on this yet.

    \subsection{Regex Suite}

        No data on this yet.

\section{Analysis}

    This section presents our analysis of the observed behaviour of \cvc{} and \us{} on Lazy-Hard and Eager-Hard problems.

    \subsection{Lazy-Hard}

        Here is why \cvc{} does poorly and \us{} does well.

    \subsection{Eager-Hard}

        Here is why \cvc{} does well and \us{} does poorly.

\section{\us{} Recommendation}

    This section outlines a change for \us{}, which we believe will improve its performance on the Eager-Hard problem set and similar problems. We recommend a partial order treatment of equivalence class comparisons. First, we describe a partial order of equivalence classes. Then, we use it in equivalence class comparisons and more closely approximate equality between them.

    \textbf{TODO:}

    \begin{enumerate}
        \item definition of partial order
        \item definition of current class relation
        \item definition of class relation under partial order
    \end{enumerate}
